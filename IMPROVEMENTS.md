# Pixel Converter Next: 改善案と新機能の提案

このドキュメントは、Pixel Converter Next アプリケーションの潜在的な改善点と新機能の概要をまとめたものです。現在計画されている項目と、将来の開発のための追加の提案が含まれています。

---
## 現在の機能

このプロジェクト「Pixel Converter Next」は、GradioベースのWeb UIを介して画像をピクセルアートに変換する機能を提供します。主な既存の機能は次のとおりです。

- **モザイク処理**: 画像を縮小し、最近傍補間を使用して拡大することで、ブロック状のピクセル化された効果を作成します。
- **減色処理 (k-means)**: ピクセルカラーにk-meansクラスタリングを適用することで、画像の色数を削減します。ユーザーは希望する色数を指定できます。
- **ガウシアンフィルタ**: 前処理ステップとしてガウシアンブラーを適用できます。ユーザーはシグマ値を制御できます。
- **エロージョンフィルタ**: 前処理ステップとしてエロージョンフィルタを適用できます。ユーザーはカーネルサイズを制御できます。
- **彩度の調整**: 画像の彩度を制御する機能（オプション：なし/弱/強）。
- **Web UI (Gradio)**: 画像のアップロードとパラメータ調整のためのインタラクティブなインターフェースを提供します。
- **調整可能なパラメータ**: ユーザーは以下を制御できます:
    - `scale_factor`: モザイク処理の拡大縮小率。
    - `colors`: k-means減色処理の色数。
    - `filter_type`: 「なし」「ガウシアンフィルタ」「エロージョン」の選択。
    - `gaussian_sigma`: ガウシアンフィルタの強さ。
    - `erosion_size`: エロージョンフィルタの強さ。
    - `apply_kmeans`: k-means減色処理のオン/オフ。

## 計画中の機能 (TODOより)

プロジェクトのREADMEに記載されている通り、以下の機能が将来の開発のために計画されています。

- **輪郭線の膨張**: ピクセル化された領域の周囲に輪郭線を追加または強調する機能（オプション：なし/弱/強）。
- **コントラストの調整**: 画像のコントラストを制御する機能（オプション：なし/弱/強）。
- **ディザリング**: 知覚される色深度を向上させ、色の縞模様を低減するためのディザリング技術の実装。

## その他の潜在的な改善点と新機能

現在計画されている項目以外に、Pixel Converter Nextを強化するための追加のアイデアを以下に示します。

- **高度なスケーリングアルゴリズム**:
    - ピクセルアートにさまざまな芸術的スタイルを提供するために、縮小（例：バイキュービック、まだ完全に使用されていない場合はLanczosバリアント）および拡大（例：hqx、xBR）のための代替画像スケーリングアルゴリズムを調査および実装します。
- **カスタムカラーパレット**:
    - k-meansで生成されたパレットを超えた、より芸術的な制御を提供するために、減色ステップで使用する特定のカラーパレットをユーザーがアップロードまたは定義できるようにします。
- **バッチ処理**:
    - 複数の画像をアップロードするか、ディレクトリを指定して、現在の設定ですべての画像を処理できるようにし、複数画像のワークフローを改善します。
- **ライブプレビューまたはパラメータ組み合わせプレビュー**:
    - パラメータが変更されると更新される、より高速で、場合によっては低忠実度のライブプレビューを実装します。
    - または、主要なパラメータの組み合わせ（例：異なるスケールファクタと色数）のマトリックスの小さなプレビューを生成する方法を提供します。
- **高度なディザリングオプション**:
    - 複数のアルゴリズム（例：Floyd-Steinberg、Ordered Dithering/Bayer Matrix、Atkinson）を提供することにより、計画されているディザリング機能を拡張します。
- **シャープニングフィルタ**:
    - 必要に応じてエッジを強調するために、ピクセル化後に適用できるオプションのシャープニングフィルタ（例：アンシャープマスキング）を追加します。
- **UI/UXの強化**:
    - **処理前/処理後イメージスライダー**: 出力画像の上にインタラクティブなスライダーを実装して、元の入力と簡単に比較できるようにします。
    - **パラメータプリセット**: ユーザーがお気に入りのパラメータの組み合わせをプリセットとして保存し、後でロードできるようにします。
    - **テーマオプション**: UI用のシンプルなライト/ダークモード。
    - **進捗表示**: より長時間の処理タスクに対して、より明確な進捗表示。
- **出力オプション**:
    - **ファイル形式の選択**: 出力形式（例：PNG、GIF）を選択できるようにします。
    - **出力のアップスケーリング係数**: ユーザーがピクセルアートの最終的なアップスケーリング係数を指定できるようにします（例：処理されたピクセルアートサイズの2倍、4倍で出力、最近傍補間を使用）。
- **パフォーマンス最適化**:
    - 特に`pixel_art_logic.py`モジュールで、より大きな画像やより複雑な操作をより高速に処理するために、既存のコードのプロファイリングとボトルネックの最適化を行います。
- **エラー処理とレポート**:
    - 無効な入力または処理の失敗に対するエラー処理を改善し、UIを介してユーザーにより明確なフィードバックを提供します。
